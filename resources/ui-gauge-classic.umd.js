(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".ui-gauge-cl-wrapper[data-v-f4a32aaf]{padding:10px;margin:10px;border:1px solid black}.ui-gauge-cl-class[data-v-f4a32aaf]{color:green;font-weight:700}.cl-gauge[data-v-f4a32aaf]{position:relative}.cl-gauge .label[data-v-f4a32aaf]{fill:currentColor;font-size:.5rem;dominant-baseline:hanging}.cl-gauge .value[data-v-f4a32aaf]{fill:currentColor}.cl-gauge .units[data-v-f4a32aaf]{fill:currentColor;font-size:.4rem}.cl-gauge .measurement[data-v-f4a32aaf]{fill:currentColor;font-size:.5rem}.cl-gauge .num[data-v-f4a32aaf]{fill:currentColor;fill-opacity:.6;font-size:.35rem}.cl-gauge .tick-minor[data-v-f4a32aaf]{fill:none;stroke:currentColor;stroke-opacity:.6}.cl-gauge .tick-major[data-v-f4a32aaf]{fill:none;stroke:currentColor}.cl-gauge .sector[data-v-f4a32aaf]{fill:none;stroke:transparent}.cl-gauge .o-needle[data-v-f4a32aaf]{transition:.5s}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(l,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],m):(l=typeof globalThis<"u"?globalThis:l||self,m(l["ui-gauge-classic"]={},l.vuex,l.Vue))})(this,function(l,m,s){"use strict";const f=(t,e)=>{const r=t.__vccOpts||t;for(const[a,i]of e)r[a]=i;return r},y={name:"UIGaugeClassic",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){},data(){return{min:0,max:1,majorDivision:10,minorDivision:5,units:"",label:"",measurement:"",valueDecimalPlaces:2,scaleDecimalPlaces:1,width:4,height:4,sectors:[],arc:{cx:50,cy:64,radius:47.5,startDegrees:-123,endDegrees:123,sweepAngle:246,startx:10,starty:90,endx:90,endy:90,arcLength:100},class:"",value:null,needles:[],widgetSizeRatio:1,unitsTextY:0,valueTextY:0}},computed:{...m.mapState("data",["messages"]),wrapperStyle:function(){let t=this.props.height;return t||(t="null"),`grid-row-end: span ${t};`},arcspec:function(){const e=this.arc.endDegrees-this.arc.startDegrees>180?1:0;return`M ${this.arc.startx} ${this.arc.starty} A ${this.arc.radius} ${this.arc.radius} 0 ${e} 1 ${this.arc.endx} ${this.arc.endy}`},formattedValue:function(){return this.value!==null?this.value.toFixed(this.valueDecimalPlaces):"---"},numbers:function(){return this.generateNumbers(this.min,this.max,this.majorDivision)},theViewBox(){let t=100*this.props.height/this.props.width;return(isNaN(t)||!t)&&(t=100),`0 0 100 ${t}`}},mounted(){this.$socket.on("widget-load:"+this.id,t=>{this.processMsg(t)}),this.$socket.on("msg-input:"+this.id,t=>{this.processMsg(t),this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.pickupProperties(),this.needles.forEach(t=>{t.rotation=this.rotation(null)}),this.$socket.emit("widget-load",this.id)},unmounted(){var t,e;(t=this.$socket)==null||t.off("widget-load"+this.id),(e=this.$socket)==null||e.off("msg-input:"+this.id)},methods:{pickupProperties:function(){const t=this.props;this.min=Number(t.min),this.max=Number(t.max),this.width=Number(t.width),this.height=Number(t.height),this.sectors=t.sectors,this.majorDivision=Number(t.major_division),this.minorDivision=Number(t.minor_division),this.valueDecimalPlaces=Number(t.value_decimal_places),this.scaleDecimalPlaces=Number(t.scale_decimal_places),this.label=t.label,this.units=t.units,this.measurement=t.measurement,this.needles=t.needles,this.arc.sweepAngle=t.sweep_angle||246,this.class=t.myclass,this.calculateDerivedValues()},strokeStyle:function(t){const e=this.sectors[t],r={minIn:this.min,maxIn:this.max,minOut:0,maxOut:this.arc.arcLength},a=this.range(e.start,r,!1);let i;t>=this.sectors.length-1?i=Math.max(this.max,this.min):i=this.sectors[t+1].start;const n=this.range(i,r,!1),o=Math.min(a,n),c=Math.max(a,n)-o;return`stroke-dasharray: 0 ${o} ${c} var(--dash); stroke: ${e.color};`},calculateDerivedValues:function(){this.majorDivision=this.majorDivision<=0?1:this.majorDivision,this.minorDivision=this.minorDivision<=0?1:this.minorDivision,this.arc.radius=47.5,this.label&&this.label.length>0?this.arc.cy=64:(this.arc.cy=50,this.height/this.width==.5&&(this.arc.radius-=2,this.arc.cy-=2.5)),this.measurement&&this.measurement.length>0?(this.unitsTextY=this.arc.cy+11,this.valueTextY=this.arc.cy+26):(this.unitsTextY=this.arc.cy-23,this.valueTextY=this.arc.cy-8),this.arc.sweepAngle&&(this.arc.sweepAngle=Math.min(360,this.arc.sweepAngle),this.arc.startDegrees=-this.arc.sweepAngle/2,this.arc.endDegrees=this.arc.sweepAngle/2);const a=this.arc.startDegrees*Math.PI/180,i=this.arc.endDegrees*Math.PI/180;this.arc.startx=this.arc.cx-this.arc.radius*Math.sin(a-Math.PI),this.arc.starty=this.arc.cy+this.arc.radius*Math.cos(a-Math.PI),this.arc.endx=this.arc.cx+this.arc.radius*Math.sin(Math.PI-i),this.arc.endy=this.arc.cy+this.arc.radius*Math.cos(Math.PI-i),this.arc.arcLength=2*Math.PI*this.arc.radius*(this.arc.endDegrees-this.arc.startDegrees)/360,this.widgetSizeRatio=this.height/this.width,(isNaN(this.widgetSizeRatio)||!this.widgetSizeRatio)&&(this.widgetSizeRatio=1)},processMsg:function(t){t.needles&&this.needles.forEach((e,r)=>{var i;const a=this.validate((i=t.needles[r])==null?void 0:i.value);r===0&&(this.value=a),e.rotation=this.rotation(a)})},validate:function(t){let e;return typeof t!="number"?(e=parseFloat(t),isNaN(e)&&(e=null)):e=t,e},range:function(t,e,r){return e.maxIn>e.minIn?(t=Math.min(t,e.maxIn),t=Math.max(t,e.minIn)):(t=Math.min(t,e.minIn),t=Math.max(t,e.maxIn)),r?Math.round((t-e.minIn)/(e.maxIn-e.minIn)*(e.maxOut-e.minOut)+e.minOut):(t-e.minIn)/(e.maxIn-e.minIn)*(e.maxOut-e.minOut)+e.minOut},generateNumbers:function(t,e,r){let a,i,n;e>t?(a=this.arc.startDegrees,i=this.arc.endDegrees,n=t):(a=this.arc.endDegrees,i=this.arc.startDegrees,n=e);const o=Math.floor(Math.abs(e-t)/r+.1),d=(i-a)*r/Math.abs(e-t);let u=[];for(let h=0;h<=o;h++){let g=h*d+a;const E=(n+h*r).toFixed(this.scaleDecimalPlaces);u.push({r:g,n:E})}return u},rotation:function(t){const e=this.height/this.width==.5?.02:.1,r=this.arc.endDegrees-this.arc.startDegrees,a=360-r,i=Math.min(e,a/2/r),n=(this.max-this.min)*i,o=r*i,c=this.min-n,d=this.max+n,u=this.arc.startDegrees-o,h=this.arc.endDegrees+o,g={minIn:c,maxIn:d,minOut:u,maxOut:h};return t===null&&(t=Math.min(c,d)),`${this.range(t,g,!1)}deg`},tickStyle:function(t,e){const r=this.arc.arcLength,a=Math.abs(this.max-this.min),i=t/a*r;return`stroke-dasharray: ${e} ${i-e}; stroke-dashoffset: ${e/2};`},needle:function(t,e){const r=this.arc.cx,a=this.arc.cy,i=(this.arc.radius-4.5)*t/100;return`<path d="M ${r},${a} ${r-1.5},${a} ${r-.15},${a-i} ${r+.15},${a-i} ${r+1.5},${a} z"
                fill="${e}"></path>`}}},x=["viewBox"],p=["d"],D=["d"],w=["d"],_=["y"],k={class:"label",y:"0",x:"50%","text-anchor":"middle"},M=["y"],b=["y"],S=["y"],$=["innerHTML"],I=["cx","cy"];function N(t,e,r,a,i,n){return s.openBlock(),s.createElementBlock("div",{className:"ui-gauge-cl-wrapper",class:s.normalizeClass(i.class),style:s.normalizeStyle(n.wrapperStyle)},[(s.openBlock(),s.createElementBlock("svg",{class:"cl-gauge",ref:"cl-gauge",width:"100%",height:"100%",viewBox:n.theViewBox,style:s.normalizeStyle(`--dash: ${this.arc.arcLength};`)},[s.createElementVNode("g",null,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.sectors,(o,c)=>(s.openBlock(),s.createElementBlock("path",{key:c,ref_for:!0,ref:"sector-"+c,class:"sector","stroke-width":"5",d:n.arcspec,style:s.normalizeStyle(n.strokeStyle(c))},null,12,p))),128)),s.createElementVNode("path",{class:"tick-minor","stroke-width":"5",d:n.arcspec,style:s.normalizeStyle(n.tickStyle(this.minorDivision,.5))},null,12,D),s.createElementVNode("path",{ref:"arc",class:"tick-major","stroke-width":"5",d:n.arcspec,style:s.normalizeStyle(n.tickStyle(this.majorDivision,1))},null,12,w),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.numbers,(o,c)=>(s.openBlock(),s.createElementBlock("text",{key:c,class:"num","text-anchor":"middle",y:`${10.5-this.arc.radius}`,style:s.normalizeStyle(`rotate: ${o.r}deg; transform-origin: ${this.arc.cx}% ${this.arc.cy/this.widgetSizeRatio}%; transform: translate(${this.arc.cx}%, ${this.arc.cy/i.widgetSizeRatio}%)`)},s.toDisplayString(o.n),13,_))),128)),s.createElementVNode("text",k,s.toDisplayString(i.label),1),s.createElementVNode("text",{class:"measurement",y:`${this.arc.cy-16}`,x:"50%","text-anchor":"middle"},s.toDisplayString(i.measurement),9,M),s.createElementVNode("text",{class:"units",y:`${this.unitsTextY}`,x:"50%","text-anchor":"middle"},s.toDisplayString(i.units),9,b),s.createElementVNode("text",{class:"value",y:`${this.valueTextY}`,x:"50%","text-anchor":"middle"},s.toDisplayString(n.formattedValue),9,S)]),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.needles,(o,c)=>(s.openBlock(),s.createElementBlock("g",{ref_for:!0,ref:"o-needle-"+c,class:"o-needle",style:s.normalizeStyle(`transform-box: fill-box; transform-origin: 50% 100%; rotate: ${o.rotation};`),innerHTML:n.needle(i.needles[c].lengthPercent,i.needles[c].color)},null,12,$))),256)),s.createElementVNode("g",null,[s.createElementVNode("circle",{class:"hub",cx:`${this.arc.cx}`,cy:`${this.arc.cy}`,r:"3"},null,8,I)])],12,x))],6)}const B=f(y,[["render",N],["__scopeId","data-v-f4a32aaf"]]);l.UIGaugeClassic=B,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
